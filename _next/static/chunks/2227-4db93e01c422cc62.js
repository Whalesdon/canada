"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2227],{22227:function(e,r,t){t.d(r,{_g:function(){return g},dE:function(){return u},iq:function(){return I},lR:function(){return f},ld:function(){return U},mW:function(){return m},r_:function(){return N}});var o,n,a,s,i,E,c=Object.defineProperty,l=(e,r,t)=>r in e?c(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,_=(e,r,t)=>(l(e,"symbol"!=typeof r?r+"":r,t),t);class h extends Error{constructor(e,r,t){let o;super("INVALID_REQUEST"===e?`${r}: ${null==t?void 0:t.map(e=>e.msg).join(", ")}`:`${e}: ${r}`),_(this,"name","WidoError"),_(this,"code"),_(this,"detail"),_(this,"validationErrors"),this.detail=r,this.code=e,this.validationErrors=t}static from_api_response(e){return new h(e.code,e.detail,e.validationErrors)}}async function u(e){let{tokenAddress:r,fromToken:t,toToken:o,chainId:n,fromChainId:a,toChainId:s,amount:i=L,tokenId:E}=e;if(!n&&!a)throw Error("fromChainId must be set");let c={chain_id:a?String(a):String(n),amount:i,from_token:t,to_token:o};r&&(c.token_address=r),E&&(c.token_id=E),s&&(c.to_chain_id=String(s));let l=new URLSearchParams(c),_=`${R.WIDO_API_URL}/approve?${l}`,u=await fetch(_);if(!u.ok)throw h.from_api_response(await u.json());let N=await u.json();return{to:N.to,data:N.data}}let N="0x0000000000000000000000000000000000000000",R={WIDO_API_URL:"https://api.joinwido.com"};async function f(e){let{txHash:r,chainId:t}=e,o={chain_id:String(t),tx_hash:r},n=new URLSearchParams(o),a=`${R.WIDO_API_URL}/status?${n}`,s=await fetch(a);if(!s.ok)throw h.from_api_response(await s.json());let i=await s.json();return{status:i.status,substatus:i.substatus,substatusMessage:i.substatus_message,toChainId:i.to_chain_id,toTxHash:i.to_tx_hash}}async function I(e){let{chainId:r,fromToken:t,toChainId:o,toToken:n}=e,a={chain_id:String(r),from_token:t,to_chain_id:String(o),to_token:n},s=new URLSearchParams(a),i=`${R.WIDO_API_URL}/contract_address?${s}`,E=await fetch(i);if(!E.ok)throw h.from_api_response(await E.json());let c=await E.json();return c.spender}async function p(e){let{chainId:r=[],protocol:t=[],includePricing:o=!1,includePreview:n=!1,toChainId:a,toToken:s}=e||{},i={include_pricing:String(o),include_preview:String(n)};a&&(i.to_chain_id=String(a)),s&&(i.to_token=s);let E=new URLSearchParams(i);r.forEach(e=>E.append("chain_id",String(e))),t.forEach(e=>E.append("protocol",e));let c=`${R.WIDO_API_URL}/tokens?${E}`,l=await fetch(c);if(!l.ok)throw h.from_api_response(await l.json());return(await l.json()).tokens}async function g(e){return await p(e)}async function U(e,r){let t=new URLSearchParams({user:e});null==r||r.forEach(e=>t.append("chain_id",String(e)));let o=`${R.WIDO_API_URL}/balances?${t}`,n=await fetch(o);if(!n.ok)throw h.from_api_response(await n.json());return(await n.json()).balances}async function m(e){let{user:r,fromChainId:t,fromToken:o,toChainId:n,toToken:a,amount:s,slippagePercentage:i=.01,varsOverride:E={},partner:c,lowerTick:l,upperTick:_,tokenId:u,recipient:N,gaslessType:f,providers:I}=e,p={from_chain_id:String(t),from_token:o,to_chain_id:String(n),to_token:a,...E};i&&(p.slippage_percentage=String(i)),s&&(p.amount=s),r&&(p.user=r),c&&(p.partner=c),l&&(p.lower_tick=l),_&&(p.upper_tick=_),u&&(p.token_id=u),N&&(p.recipient=N),f&&(p.gasless_type=f);let g=new URLSearchParams(p);if(I)for(let e of I)g.append("providers",e);let U=`${R.WIDO_API_URL}/quote_v2?${g}`,m=await fetch(U);if(!m.ok)throw h.from_api_response(await m.json());let w=await m.json(),{is_supported:d,steps:T,steps_count:O,messages:A}=w,S={isSupported:d,steps:T,stepsCount:O,messages:A||[]};if(!s&&!r)return S;let{price:P,min_price:C,from_token_usd_price:L,from_token_amount:k,from_token_amount_usd_value:D,to_token_usd_price:b,to_token_amount:F,to_token_amount_usd_value:M,expected_slippage:v,min_to_token_amount:y,from:G,to:j,data:W,value:$,gas_fee:V,gas_fee_usd:x,fee_in_from_token:B,bridge_fee_usd_value:X,fee_usd_value:z}=w;return{...S,price:P,minPrice:C,fromTokenUsdPrice:L,fromTokenAmount:k,fromTokenAmountUsdValue:D,toTokenUsdPrice:b,toTokenAmount:F,toTokenAmountUsdValue:M,expectedSlippage:v,minToTokenAmount:y,from:G,to:j,data:W,value:$,gasFee:V,gasFeeUsdValue:x,feeBps:w.fee_bps,feeInFromToken:B,bridgeFeeUsdValue:X,feeUsdValue:z}}let w=!1,d=!1,T={debug:1,default:2,info:2,warning:3,error:4,off:5},O=2,A=null,S=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(r=>{try{if("test"!=="test".normalize(r))throw Error("bad normalize")}catch(t){e.push(r)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){return e.message}return null}();(o=i||(i={})).DEBUG="DEBUG",o.INFO="INFO",o.WARNING="WARNING",o.ERROR="ERROR",o.OFF="OFF",(n=E||(E={})).UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED";let P="0123456789abcdef";class C{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){let t=e.toLowerCase();null==T[t]&&this.throwArgumentError("invalid log level name","logLevel",e),O>T[t]||console.log.apply(console,r)}debug(...e){this._log(C.levels.DEBUG,e)}info(...e){this._log(C.levels.INFO,e)}warn(...e){this._log(C.levels.WARNING,e)}makeError(e,r,t){if(d)return this.makeError("censored error",r,{});r||(r=C.errors.UNKNOWN_ERROR),t||(t={});let o=[];Object.keys(t).forEach(e=>{let r=t[e];try{if(r instanceof Uint8Array){let t="";for(let e=0;e<r.length;e++)t+=P[r[e]>>4]+P[15&r[e]];o.push(e+"=Uint8Array(0x"+t+")")}else o.push(e+"="+JSON.stringify(r))}catch(r){o.push(e+"="+JSON.stringify(t[e].toString()))}}),o.push(`code=${r}`),o.push(`version=${this.version}`);let n=e,a="";switch(r){case E.NUMERIC_FAULT:{a="NUMERIC_FAULT";let r=e;switch(r){case"overflow":case"underflow":case"division-by-zero":a+="-"+r;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break}case E.CALL_EXCEPTION:case E.INSUFFICIENT_FUNDS:case E.MISSING_NEW:case E.NONCE_EXPIRED:case E.REPLACEMENT_UNDERPRICED:case E.TRANSACTION_REPLACED:case E.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),o.length&&(e+=" ("+o.join(", ")+")");let s=Error(e);return s.reason=n,s.code=r,Object.keys(t).forEach(function(e){s[e]=t[e]}),s}throwError(e,r,t){throw this.makeError(e,r,t)}throwArgumentError(e,r,t){return this.throwError(e,C.errors.INVALID_ARGUMENT,{argument:r,value:t})}assert(e,r,t,o){e||this.throwError(r,t,o)}assertArgument(e,r,t,o){e||this.throwArgumentError(r,t,o)}checkNormalize(e){S&&this.throwError("platform missing String.prototype.normalize",C.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:S})}checkSafeUint53(e,r){"number"==typeof e&&(null==r&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,C.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,C.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,t){t=t?": "+t:"",e<r&&this.throwError("missing argument"+t,C.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+t,C.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||null==e)&&this.throwError("missing new",C.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",C.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",C.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return A||(A=new C("logger/5.7.0")),A}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",C.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),w){if(!e)return;this.globalLogger().throwError("error censorship permanent",C.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}d=!!e,w=!!r}static setLogLevel(e){let r=T[e.toLowerCase()];if(null==r){C.globalLogger().warn("invalid log level - "+e);return}O=r}static from(e){return new C(e)}}C.errors=E,C.levels=i,new C("properties/5.7.0");let L="115792089237316195423570985008687907853269984665640564039457584007913129639935";var k=((a=k||{}).ERC4337="erc4337",a.EOA="eoa",a),D=((s=D||{}).LiFi="LiFi",s.ZeroEx="ZeroEx",s.OpenOcean="OpenOcean",s)}}]);